/* MyAnimeList AMOLED Theme - Ultra Dark Cyan (Production) */
/* Tokens */
:root {
  /* Core palette */
  --bg-0: #000;           /* pure black */
  --bg-1: #07090a;        /* near-black surface */
  --bg-2: #0d1012;        /* elevated surface */
  --bg-3: #12161a;        /* high elevation/cards */

  --fg-1: #e6e8eb;        /* primary text */
  --fg-2: #a7adb4;        /* secondary text */
  --fg-3: #6b737c;        /* tertiary */

  --accent: #00e5ff;      /* cyan */
  --accent-600: #00c6e0;  /* hover */
  --accent-700: #00a8bf;  /* active */

  --success: #00e676;
  --warning: #ffea00;
  --danger: #ff1744;

  --bd-1: #1a1f24;        /* low contrast border */
  --bd-2: #22303a;        /* stronger border */

  --radius-1: 6px;
  --radius-2: 10px;
  --shadow-1: 0 1px 0 rgba(0,0,0,.6);
  --shadow-2: 0 2px 10px rgba(0, 229, 255, .12);

  --gap-1: .5rem; /* 8px */
  --gap-2: .75rem;/* 12px */
  --gap-3: 1rem;  /* 16px */
  --gap-4: 1.25rem;/* 20px */

  color-scheme: dark;
}

@media (prefers-color-scheme: dark) {
  :root { color-scheme: dark; }
}

/* Base resets for MAL pages */
html, body {
  background: var(--bg-0) !important;
  color: var(--fg-1) !important;
}

body, :is(#myanimelist, #content, .container, .content) {
  background: var(--bg-0) !important;
}

:is(#myanimelist, #menu, header, .header, .navbar, .h1) {
  background: var(--bg-1) !important;
  border-bottom: 1px solid var(--bd-1) !important;
  color: var(--fg-1) !important;
}

/* Typography */
:is(h1, h2, h3, h4, h5) { color: var(--fg-1) !important; }
:is(p, small, .text, .note) { color: var(--fg-2) !important; }

/* Links */
a { color: var(--accent) !important; text-decoration: none !important; }
a:hover { color: var(--accent-600) !important; text-decoration: underline !important; }
a:active { color: var(--accent-700) !important; }

/* Common containers and cards (lists, entries, forum posts, user panels) */
:is(.list-item, .list-table-data, .list, .seasonal-anime, .ranking-list, .episode-list, .forum-post, .profile, .user-status, .statistics, .content-wrapper, .di-ib) {
  background: var(--bg-2) !important;
  border: 1px solid var(--bd-1) !important;
  border-radius: var(--radius-2) !important;
}

:is(.list-item, .ranking-list, .forum-post, .profile) + :is(.list-item, .ranking-list, .forum-post, .profile) {
  margin-top: var(--gap-2) !important;
}

/* Tables */
:is(table, .list-table) { background: var(--bg-1) !important; color: var(--fg-1) !important; border-collapse: separate !important; border-spacing: 0 !important; }
:is(table th, .list-table th) { background: var(--bg-2) !important; color: var(--accent) !important; border: 1px solid var(--bd-2) !important; }
:is(table td, .list-table td) { border: 1px solid var(--bd-1) !important; }
:is(tr:nth-child(even)) { background: var(--bg-1) !important; }

/* Inputs */
:is(input[type="text"], input[type="search"], input[type="email"], input[type="url"], input[type="number"], textarea, select) {
  background: var(--bg-2) !important;
  color: var(--fg-1) !important;
  border: 1px solid var(--bd-1) !important;
  border-radius: var(--radius-1) !important;
  padding: .6rem .75rem !important;
}
:is(input, textarea, select):focus-visible { outline: 2px solid var(--accent-600) !important; outline-offset: 1px !important; }

/* Buttons */
:is(button, .button, [role="button"], input[type="submit"], input[type="button"], .btn, .btn-primary) {
  background: var(--bg-2) !important;
  color: var(--accent) !important;
  border: 1px solid var(--accent) !important;
  border-radius: var(--radius-1) !important;
  padding: .5rem .9rem !important;
  box-shadow: var(--shadow-1) !important;
  cursor: pointer !important;
}
:is(button, .button, .btn):hover { background: var(--accent) !important; color: var(--bg-0) !important; box-shadow: var(--shadow-2) !important; }
:is(button, .button, .btn):active { transform: translateY(0) !important; filter: brightness(.95) !important; }

/* Status and score colors */
:is(.watching, .reading) { color: var(--accent) !important; }
.completed { color: var(--success) !important; }
.on-hold { color: var(--warning) !important; }
.dropped { color: var(--danger) !important; }
:is(.plan-to-watch, .plan-to-read) { color: var(--fg-3) !important; }

:is(.score-10, .score-9) { color: var(--success) !important; }
:is(.score-8, .score-7) { color: #76ff03 !important; }
:is(.score-6, .score-5) { color: var(--warning) !important; }
:is(.score-4, .score-3) { color: #ff9100 !important; }
:is(.score-2, .score-1) { color: var(--danger) !important; }

/* Images */
img { border-radius: var(--radius-1) !important; border: 1px solid var(--bd-1) !important; background: #0000 !important; }

/* Hover effect on interactive cards */
:is(.list-item, .ranking-list, .seasonal-anime, .manga-list-item, .anime-list-item):hover {
  border-color: var(--accent) !important;
  box-shadow: var(--shadow-2) !important;
}

/* MAL specific layout fixes (2024+) */
/* New MAL site uses .page-common, .container, .container-right, .container-left, .list-unit */
:is(.page-common, .container, .container-right, .container-left, #content, .content) { background: var(--bg-0) !important; }

/* Sidebar */
:is(#nav, .sidebar, .side, .widget, .user-profile .user-function) {
  background: var(--bg-1) !important;
  border: 1px solid var(--bd-1) !important;
  border-radius: var(--radius-2) !important;
}

/* Pill badges, tags */
:is(.tag, .badge, .status) {
  background: color-mix(in oklab, var(--accent) 22%, black) !important;
  color: var(--fg-1) !important;
  border: 1px solid color-mix(in oklab, var(--accent) 40%, black) !important;
  border-radius: 999px !important;
}

/* Grid (Pinterest-style) for anime/manga tiles */
.grid-auto, .pinterest-grid {
  display: grid !important;
  grid-template-columns: repeat(auto-fill, minmax(min(180px, 100%), 1fr)) !important;
  gap: var(--gap-3) !important;
  align-items: start !important;
}

/* Apply grid to common MAL listing blocks when in card mode */
:is(.seasonal-anime-list, .seasonal-anime .js-categories-seasonal, .top-ranking-table, .js-categories-seasonal, .recommendations .widget-content, .related-anime) {
  display: grid !important;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)) !important;
  gap: var(--gap-3) !important;
}

/* Individual tile styling */
:is(.seasonal-anime .seasonal-anime js-seasonal-anime, .seasonal-anime, .ranking-list) {
  background: var(--bg-2) !important;
  border-radius: var(--radius-2) !important;
  border: 1px solid var(--bd-1) !important;
  overflow: hidden !important;
}

/* Media block inside tiles */
:is(.image, .picSurround, .hoverinfo, .img, .widget-content img) {
  border-radius: var(--radius-1) !important;
}

/* Dialogs, modals */
:is(.modal, .dialog, .modal-content) {
  background: var(--bg-2) !important;
  color: var(--fg-1) !important;
  border: 1px solid var(--bd-2) !important;
  border-radius: var(--radius-2) !important;
}

/* Menus and dropdowns */
:is(.dropdown, .drop-down, .user-dropdown, .menu, .header-menu, .search-result) {
  background: var(--bg-2) !important;
  border: 1px solid var(--bd-2) !important;
  box-shadow: 0 8px 24px rgba(0,0,0,.6) !important;
}
:is(.dropdown a, .menu a, .search-result a) { color: var(--fg-1) !important; }
:is(.dropdown a:hover, .menu a:hover, .search-result a:hover) { background: var(--bg-3) !important; }

/* Notifications / toasts */
:is(.notification, .toast) {
  background: color-mix(in oklab, var(--bg-3) 85%, black) !important;
  border: 1px solid var(--bd-2) !important;
  color: var(--fg-1) !important;
}

/* Search header and inputs */
:is(#topSearchText, #topSearchBar, .malSearch, .js-block-list .search) {
  background: var(--bg-2) !important;
  border: 1px solid var(--bd-1) !important;
  color: var(--fg-1) !important;
}

/* Footer */
:is(footer, .footer, #footer-block) { background: var(--bg-1) !important; border-top: 1px solid var(--bd-1) !important; color: var(--fg-2) !important; }

/* Scrollbars */
* { scrollbar-width: thin; scrollbar-color: var(--bg-3) var(--bg-0); }
::-webkit-scrollbar { width: 12px; height: 12px; background: var(--bg-0); }
::-webkit-scrollbar-thumb { background: var(--bg-3); border: 1px solid var(--bd-1); border-radius: 8px; }
::-webkit-scrollbar-thumb:hover { background: var(--accent-600); border-color: var(--accent-600); }

/* Media queries for better density */
@media (max-width: 960px) {
  .grid-auto, .pinterest-grid { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)) !important; }
}
@media (max-width: 640px) {
  .grid-auto, .pinterest-grid { grid-template-columns: repeat(2, minmax(0, 1fr)) !important; }
}

/* Compatibility: cover older MAL classes without conflicts */
:where(.list-item, .anime-list-item, .manga-list-item) {
  background: var(--bg-2) !important;
  border: 1px solid var(--bd-1) !important;
  border-radius: var(--radius-2) !important;
  margin-bottom: var(--gap-2) !important;
}
